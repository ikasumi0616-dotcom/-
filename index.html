<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Music Library</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <style>
        :root { --apple-red: #ff2d55; --bg-black: #000; }
        body { margin: 0; background: var(--bg-black); color: white; font-family: -apple-system, sans-serif; overflow-x: hidden; }
        
        /* ライブラリ画面 */
        #library-screen { padding: 20px; padding-top: 30px; }
        h1 { font-size: 34px; margin-bottom: 20px; border-bottom: 0.5px solid #333; padding-bottom: 10px; }
        .song-item { display: flex; align-items: center; padding: 12px 0; border-bottom: 0.5px solid #333; cursor: pointer; }
        .song-item img { width: 55px; height: 55px; border-radius: 6px; margin-right: 15px; object-fit: cover; }
        .song-info .title { font-size: 17px; font-weight: 500; }
        .song-info .artist { font-size: 14px; color: #8e8e93; }

        /* プレイヤー画面（上に引き上げ済み） */
        #player-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, #2c2c2e, #000); display: none; flex-direction: column; align-items: center; padding-top: 20px; z-index: 100; }
        .back-btn { position: absolute; top: 20px; left: 20px; font-size: 15px; color: white; border: none; background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 20px; }
        .jacket-big { width: 70%; aspect-ratio: 1/1; border-radius: 12px; box-shadow: 0 15px 40px rgba(0,0,0,0.7); margin-bottom: 25px; object-fit: cover; }
        .p-info { width: 80%; text-align: left; margin-bottom: 15px; }
        .p-title { font-size: 23px; font-weight: bold; }
        .p-artist { font-size: 18px; color: var(--apple-red); margin-top: 4px; }

        /* 再生バー（白い線） */
        .seek-container { width: 85%; margin-bottom: 25px; }
        #seek-bar { width: 100%; accent-color: white; cursor: pointer; height: 4px; }
        .time-info { display: flex; justify-content: space-between; font-size: 12px; color: #8e8e93; margin-top: 8px; }

        .play-btn { background: white; color: black; border: none; width: 70px; height: 70px; border-radius: 50%; font-size: 30px; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>

<div id="library-screen">
    <h1>ライブラリ</h1>
    
        <div class="song-item" onclick="openPlayer('水色侵略', 'ナユタン星人', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQFSIg4JHtAksIoZjpoCoiHVxorSrSfVItpfxMThqFO7ptiPkgRYI-qq1Y&s=10', 'https://rr2---sn-3pm7dnek.googlevideo.com/videoplayback?expire=1768747399&ei=J51saYT9H4SV1d8PhOvuyQE&ip=126.221.167.18&id=o-AFHZNI4hp6ia4UFFaBzRQD0KaU1IqRiepesfiaZUO-f0&itag=140&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ==&rms=au,au&bui=AW-iu_qbDz3QVyyLOJfiDWMzP2U6B4sFfa_1r90FGH-GzfV85c3R8yrsFTl-hz6U_gWWm1xH6mkNi_c6&spc=q5xjPBNve8RQ&vprv=1&svpuc=1&mime=audio/mp4&rqh=1&gir=yes&clen=4040620&dur=249.614&lmt=1708478017806141&keepalive=yes&fexp=51552689,51565115,51565681,51580968&c=ANDROID&txp=4532434&sparams=expire,ei,ip,id,itag,source,requiressl,xpc,bui,spc,vprv,svpuc,mime,rqh,gir,clen,dur,lmt&sig=AJfQdSswRQIhAJerDFkTUdEeBKDsbdrNO6zH4Q14HUmevirqp_k_45cvAiBhugjrlJUFBmDNhIRPiWDqZ4tw-DiY-HLIf1NqtUxLUw==&from_cache=False&title=%E3%83%8A%E3%83%A6%E3%82%BF%E3%83%B3%E6%98%9F%E4%BA%BA%20-%20%E6%B0%B4%E8%89%B2%E4%BE%B5%E7%95%A5%20(ft.%E5%88%9D%E9%9F%B3%E3%83%9F%E3%82%AF)%20OFFICIAL%20MUSIC%20VIDEO&redirect_counter=1&rm=sn-ogueez7l&rrc=104&req_id=4b588b9608da3ee&cms_redirect=yes&cmsv=e&cps=100&ipbypass=yes&met=1768725803,&mh=7a&mip=2400:2650:7144:8f00:b99b:69f0:cd3f:5382&mm=31&mn=sn-3pm7dnek&ms=au&mt=1768725403&mv=m&mvi=2&pl=32&lsparams=cps,ipbypass,met,mh,mip,mm,mn,ms,mv,mvi,pl,rms&lsig=APaTxxMwRQIgGLOXnIuphL4oHdMRIU0Jf9a6vHaZyB9BQfasJJdXJnECIQD2BcCjvw1h2k0TEl-OENJORQ2I0wsYjxFk2FcLq6OHgw%3D%3D')">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQFSIg4JHtAksIoZjpoCoiHVxorSrSfVItpfxMThqFO7ptiPkgRYI-qq1Y&s=10">
        <div class="song-info"><div class="title">水色侵略</div><div class="artist">ナユタン星人</div></div>
    </div>

    <div class="song-item" onclick="openPlayer('ただ君に晴れ', 'ヨルシカ', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQoirt4O4EZaKDVV-OZBHIxqnCemfKkk4IwIDJ28sS7iiDQmdZRU-Yg4B8h&s=10', 'https://rr3---sn-3pm7kn76.googlevideo.com/videoplayback?expire=1768731618&ei=gl9saZaqGYCL4-EPptnxuQQ&ip=125.20.112.90&id=o-AJD1_OQI7Mkaf2HpEtCsfPG0iBQ6dE_NzTjl5Zm-pJg9&itag=251&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ%3D%3D&cps=97&bui=AW-iu_qx3fK7aBHMD8lWpUq1oiMR7yv8tVBmboyrgdeqVfoNPBY0KGgpmLIoDWhb6kCDjo9jFKU2erCW&vprv=1&svpuc=1&mime=audio%2Fwebm&ns=FwMQ4w9UCKjGwiv8dVIuuy0R&rqh=1&gir=yes&clen=3245124&dur=199.841&lmt=1726196027396753&keepalive=yes&lmw=1&fexp=51557447,51565116,51565682,51580970&c=TVHTML5&sefc=1&txp=4532434&n=X0NwA9ayHLBaPw&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cxpc%2Cbui%2Cvprv%2Csvpuc%2Cmime%2Cns%2Crqh%2Cgir%2Cclen%2Cdur%2Clmt&sig=AJfQdSswRQIhAK4HXAU-n65YNGVoW5CuFpdFJxoLd8IS80HNptAGHZmjAiAb1bANMJVGVnz31PTLKZcfWb7OjJvUMgzfNoyHrqP7zA%3D%3D&rm=sn-ci5gup-qxaee7k,sn-qxald76&rrc=79,104&req_id=e904bc958155a3ee&cmsv=e&rms=nxu,au&redirect_counter=2&cms_redirect=yes&ipbypass=yes&met=1768723803,&mh=fu&mip=2400:2650:7144:8f00:b99b:69f0:cd3f:5382&mm=30&mn=sn-3pm7kn76&ms=nxu&mt=1768723463&mv=m&mvi=3&pl=32&lsparams=cps,ipbypass,met,mh,mip,mm,mn,ms,mv,mvi,pl,rms&lsig=APaTxxMwRgIhAMo0uGwQ5YGKLMlErX1cBBXEkaL3XCmMICh6KgLJE0tSAiEAnTt78BJUpllJc02aVeGufTpLdm6Q3KBMcAhgkTKsc1s%3D')">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQoirt4O4EZaKDVV-OZBHIxqnCemfKkk4IwIDJ28sS7iiDQmdZRU-Yg4B8h&s=10">
        <div class="song-info"><div class="title">ただ君に晴れ</div><div class="artist">ヨルシカ</div></div>
    </div>

    <div class="song-item" onclick="openPlayer('正しくなれない', 'ずっと真夜中でいいのに。', 'https://i.kfs.io/album/global/96695506,1v1/fit/500x500.jpg', 'https://rr5---sn-3pm7dned.googlevideo.com/videoplayback?expire=1768746007&ei=t5dsaea7EcPqpt8PiZ2emQo&ip=120.138.151.40&id=o-ALPw-0aK-8D-HpjGzNquEfkNgbCXvcurUmEGquZmyo1P&itag=140&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ==&cps=309&bui=AW-iu_q7Y_Kyau5U824PHIXt7l2oNl_2pVd8ExzO3Clrt_lbRJZGauQfLzf66tB27sAchDpxMjF2mTmo&spc=q5xjPJnBUfcz&vprv=1&svpuc=1&mime=audio/mp4&rqh=1&gir=yes&clen=3900327&dur=240.953&lmt=1705530930809928&keepalive=yes&fexp=51552689,51565115,51565682,51580968&c=ANDROID&txp=4532434&sparams=expire,ei,ip,id,itag,source,requiressl,xpc,bui,spc,vprv,svpuc,mime,rqh,gir,clen,dur,lmt&sig=AJfQdSswRQIhANByjMQdH2Nk5cbt3YydgYBFUhtQMrWgtv-ieo5aFICBAiAW-Ggih3VXlqW6Lg0mSOGvGlh3ICOYpCLmMu20bYkang==&from_cache=False&title=%E3%81%9A%E3%81%A3%E3%81%A8%E7%9C%9F%E5%A4%9C%E4%B8%AD%E3%81%A7%E3%81%84%E3%81%84%E3%81%AE%E3%81%AB%E3%80%82%E3%80%8E%E6%AD%A3%E3%81%97%E3%81%8F%E3%81%AA%E3%82%8C%E3%81%AA%E3%81%84%E3%80%8FMV%EF%BC%88ZUTOMAYO%20%E2%80%93%20Can%E2%80%99t%20Be%20Right%EF%BC%89&rm=sn-jojp-obvk76,sn-ogueee7l&rrc=79,104&req_id=120e09eedebea3ee&rms=rdu,au&redirect_counter=2&cms_redirect=yes&cmsv=e&ipbypass=yes&met=1768724413,&mh=-T&mip=2400:2650:7144:8f00:b99b:69f0:cd3f:5382&mm=29&mn=sn-3pm7dned&ms=rdu&mt=1768724201&mv=m&mvi=5&pl=32&lsparams=cps,ipbypass,met,mh,mip,mm,mn,ms,mv,mvi,pl,rms&lsig=APaTxxMwRgIhAP4DKP-xH_j7_1Q0wvPE6yxeU3b6sK12-waWCB36Ix2DAiEA2YZMe6F_5Pk_YNJRzaGQrnR1HX54VSbsi_CwofARnxI%3D')">
        <img src="https://i.kfs.io/album/global/96695506,1v1/fit/500x500.jpg">
        <div class="song-info"><div class="title">正しくなれない</div><div class="artist">ずっと真夜中でいいのに。</div></div>
    </div>

    

    <div class="song-item" onclick="openPlayer('フォニイ', 'ツミキ', 'https://i1.sndcdn.com/artworks-tT9a73bRyGkxGhyM-gD3vjA-t500x500.jpg', 'https://rr2---sn-3pm7dner.googlevideo.com/videoplayback?expire=1768747983&ei=b59sadz4LqKHr9gPifDh-AM&ip=46.202.224.205&id=o-AC89f8RAevobCpKLSM0BJkMCRViBjBPqlzm7Qj3m6t9k&itag=140&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ%3D%3D&cps=17&rms=au%2Cau&bui=AW-iu_psnLraQyOt843a6qh4Y20kag7cyBguNVsOak-P8_MCw5fNklBBt3aiksjlrP8JimBmA1glC3UE&spc=q5xjPHbJHdvn&vprv=1&svpuc=1&mime=audio%2Fmp4&rqh=1&gir=yes&clen=3047202&dur=188.244&lmt=1706141004660379&keepalive=yes&fexp=51552689,51565115,51565681,51580968&c=ANDROID_VR&txp=4532434&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cxpc%2Cbui%2Cspc%2Cvprv%2Csvpuc%2Cmime%2Crqh%2Cgir%2Cclen%2Cdur%2Clmt&sig=AJfQdSswRQIhAOID_-BmWJjJb6PydUprqJ6KxUMlxk6ctPawWZEs2jC3AiAvcogJTiEYann_clvoyqiNQQNxKcmF38CmS83ijyFMaA%3D%3D&redirect_counter=1&rm=sn-p5qeer7s&rrc=104&req_id=260aca44058ba3ee&cms_redirect=yes&ipbypass=yes&met=1768726391,&mh=pY&mip=2400:2650:7144:8f00:b99b:69f0:cd3f:5382&mm=31&mn=sn-3pm7dner&ms=au&mt=1768725884&mv=m&mvi=2&pl=32&lsparams=cps,ipbypass,met,mh,mip,mm,mn,ms,mv,mvi,pl,rms&lsig=APaTxxMwRQIhAKI7cX_8ftOaiieD4SgMsEKUbTeiSdYAdmQhAehRhykFAiBic9XyZLxbbQcRK3g-dhhTlKdZJ5QNOxtnOf-gaDn58Q%3D%3D')">
        <img src="https://i1.sndcdn.com/artworks-tT9a73bRyGkxGhyM-gD3vjA-t500x500.jpg">
        <div class="song-info"><div class="title">フォニイ</div><div class="artist">ツミキ</div></div>
    </div>

    <div class="song-item" onclick="openPlayer('エゴロック', 'すりぃ', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRnUm5J7ccLutsqE-OElu_8yzJZXClKv98UWXiNVBHv7AtydVwZtMBLAdY&s=10', 'https://rr2---sn-3pm7knel.googlevideo.com/videoplayback?expire=1768748338&ei=0qBsacDKEYSAkucPkY6SyQ0&ip=46.202.224.205&id=o-AAsituMnL6nXdAyFS7GkBTUuxCTRvd0gIrSIjFOZw7VR&itag=140&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ%3D%3D&rms=au%2Cau&bui=AW-iu_ohlkKpDWO5VsFXuVsaKap_CXBPj4hZ2bRQAT18ubVa6Md4VAtIoG2TjFEqGb8FmvGBJNG4IsVI&spc=q5xjPJ_HewhS&vprv=1&svpuc=1&mime=audio%2Fmp4&rqh=1&gir=yes&clen=2760656&dur=170.527&lmt=1751746835313863&keepalive=yes&fexp=51552689,51565116,51565681,51580968&c=ANDROID_VR&txp=4532534&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cxpc%2Cbui%2Cspc%2Cvprv%2Csvpuc%2Cmime%2Crqh%2Cgir%2Cclen%2Cdur%2Clmt&sig=AJfQdSswRQIhANLZc-crgTdnfecjx-IreyD4tM4-ww3AVDplq8I3_bDpAiAksdyB1TP6GsjAtdqKu7FIBMW-12JxRdibQBb36dtEfA%3D%3D&redirect_counter=1&rm=sn-p5qeee7e&rrc=104&req_id=9c5d0e6d108da3ee&cms_redirect=yes&ipbypass=yes&met=1768726749,&mh=aU&mip=2400:2650:7144:8f00:b99b:69f0:cd3f:5382&mm=31&mn=sn-3pm7knel&ms=au&mt=1768726373&mv=m&mvi=2&pl=32&lsparams=ipbypass,met,mh,mip,mm,mn,ms,mv,mvi,pl,rms&lsig=APaTxxMwRAIgHLP8GppK_WD-Lzni2QHjnma09eoFDCjLXkkg8hg0xiMCIDteiD3s1JS0lIdmuZbQyJkzrHpasNCOoq6lgxC54IWY')">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRnUm5J7ccLutsqE-OElu_8yzJZXClKv98UWXiNVBHv7AtydVwZtMBLAdY&s=10">
        <div class="song-info"><div class="title">エゴロック</div><div class="artist">すりぃ</div></div>
    </div>

    <div class="song-item" onclick="openPlayer('恋風', '​幾田りら', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSR1CTX1feIVp0pqB5dsukeZg9TLh9SfxPZKrT779M9MlIjL4swLFbMt2o&s=10', 'https://rr1---sn-3pm7dn7y.googlevideo.com/videoplayback?expire=1768750604&ei=rKlsaZSFAZPOssUPwKrekQY&ip=2405%3A201%3Aa800%3Aa041%3A44a0%3Ae4ea%3A58ae%3A3997&id=o-AIWkaF37YDpSo9hvYcG_3RxHir3-UIoqh8GuZAt8l7-o&itag=251&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ%3D%3D&cps=0&bui=AW-iu_pM7aGS4pwEo-FcGjsdiUhft5W2pLnbckLzfuPLiMwHsvdbkLGvflKP3Lg9YYCDYp0a8klqiLC1&vprv=1&svpuc=1&mime=audio%2Fwebm&ns=1zKxpy4kP8k8jKrY8OaOF60R&rqh=1&gir=yes&clen=3053472&dur=182.121&lmt=1745757315645449&keepalive=yes&lmw=1&fexp=51557447,51565116,51565681,51580970&c=TVHTML5&sefc=1&txp=5532534&n=RuPpwHMbqhUGLA&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cxpc%2Cbui%2Cvprv%2Csvpuc%2Cmime%2Cns%2Crqh%2Cgir%2Cclen%2Cdur%2Clmt&sig=AJfQdSswRQIgQd40JTfNNpr8FyoFbslfV0b6wrjURygjCoF5UII12mECIQDcfJxlpMDhi_8PuF4oD12l2RInjOB5Tqt5_fRmOr-8dA%3D%3D&rm=sn-gwpa-b50l7l,sn-qxal77z&rrc=79,104&req_id=51f22d469023a3ee&cmsv=e&rms=rdu,au&redirect_counter=2&cms_redirect=yes&ipbypass=yes&met=1768729013,&mh=eP&mip=2400:2650:7144:8f00:b99b:69f0:cd3f:5382&mm=29&mn=sn-3pm7dn7y&ms=rdu&mt=1768728548&mv=m&mvi=1&pl=32&lsparams=cps,ipbypass,met,mh,mip,mm,mn,ms,mv,mvi,pl,rms&lsig=APaTxxMwRQIgZi22cyNT9pNDA7Ct3Jrw58fRLhrb1eyg7f3bAb8ySxMCIQDXts7mT2nexemwWjcp3J7JAi3mfNAk7ggzvPz45-kCBQ%3D%3D')">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSR1CTX1feIVp0pqB5dsukeZg9TLh9SfxPZKrT779M9MlIjL4swLFbMt2o&s=10">
        <div class="song-info"><div class="title">恋風</div><div class="artist">​幾田りら</div></div>
    </div>

<div class="song-item" onclick="openPlayer('怪獣の花唄', 'Vaundy', 'https://i.ytimg.com/vi/QPmwuAe2wBA/maxresdefault.jpg', 'https://r3---sn-3pm7dned.googlevideo.com/videoplayback?expire=1768751473&ei=Ea1saaD9JsHQ6dsP9_nPWQ&ip=80.187.101.183&id=o-AO2LN4TqNqFdzxi6kXNcGkynMhkH83QV7ck6l1hzUp0t&itag=18&source=youtube&requiressl=yes&xpc=EgVo2aDSNQ%3D%3D&rms=au%2Cau&bui=AW-iu_rC67TOAjkScmX6_9JH44gMA_m7lp1aioJeFJFsbB090a9q4XdDfe1WhVRSUdV0Moi9PVJ8a5ji&spc=q5xjPOqSGO1QuTf0sg0c&vprv=1&svpuc=1&mime=video%2Fmp4&rqh=1&cnr=14&ratebypass=yes&dur=232.849&lmt=1706168634789178&fexp=51552689%2C51565115%2C51565681%2C51580968&c=ANDROID&txp=4538434&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cxpc%2Cbui%2Cspc%2Cvprv%2Csvpuc%2Cmime%2Crqh%2Ccnr%2Cratebypass%2Cdur%2Clmt&sig=AJfQdSswRQIgRhkXrdn4iJlVh4yx4Ow1WHicPjnG1Rb_0E9HsspC-DgCIQCPipAT98WjJRgXZTuUYAP0jEIjdxrbNNC1duXzDSfs6A%3D%3D&cms_redirect=yes&cps=388&met=1768729884,&mh=aB&mip=2400:2650:7144:8f00:b99b:69f0:cd3f:5382&mm=31&mn=sn-3pm7dned&ms=au&mt=1768729495&mv=m&mvi=3&pl=32&lsparams=cps,met,mh,mip,mm,mn,ms,mv,mvi,pl,rms&lsig=APaTxxMwRQIgDzbE06GYoAH6rwsrQFw47k1clDdWrfiuWsxCrDDgiisCIQCtJhx79tqreREOBICn-dDu_gk0jj7yjHJ8SnHP5rVQJQ%3D%3D')">
    <img src="https://i.ytimg.com/vi/QPmwuAe2wBA/maxresdefault.jpg">
    <div class="song-info">
        <div class="title">怪獣の花唄</div>
        <div class="artist">Vaundy</div>
    </div>
</div>


<div id="player-screen">
    <button class="back-btn" onclick="closePlayer()">✕ 閉じる</button>
    <img src="" id="p-jacket" class="jacket-big">
    <div class="p-info">
        <div id="p-title" class="p-title"></div>
        <div id="p-artist" class="p-artist"></div>
    </div>

    <div class="seek-container">
        <input type="range" id="seek-bar" value="0" step="1">
        <div class="time-info">
            <span id="current-time">0:00</span>
            <span id="duration-time">0:00</span>
        </div>
    </div>

    <button class="play-btn" id="playBtn" onclick="togglePlay()">▶</button>
</div>

<script>
    const audio = new Audio();
    const seekBar = document.getElementById('seek-bar');
    const currentTimeEl = document.getElementById('current-time');
    const durationTimeEl = document.getElementById('duration-time');
    let isPlaying = false;

    function openPlayer(title, artist, img, src) {
        document.getElementById('p-title').innerText = title;
        document.getElementById('p-artist').innerText = artist;
        document.getElementById('p-jacket').src = img;
        
        if (audio.src.indexOf(src) === -1) {
            audio.src = src;
            isPlaying = false;
            document.getElementById('playBtn').innerText = '▶';
            seekBar.value = 0;
            currentTimeEl.innerText = "0:00";
        }
        document.getElementById('player-screen').style.display = 'flex';
        
        if ('mediaSession' in navigator) {
            navigator.mediaSession.metadata = new MediaMetadata({
                title: title, artist: artist,
                artwork: [{ src: img, sizes: '512x512', type: 'image/jpeg' }]
            });
        }
    }

    function closePlayer() { document.getElementById('player-screen').style.display = 'none'; }

    function togglePlay() {
        const btn = document.getElementById('playBtn');
        if (isPlaying) { audio.pause(); btn.innerText = '▶'; } 
        else { audio.play(); btn.innerText = 'II'; }
        isPlaying = !isPlaying;
    }

    audio.addEventListener('loadedmetadata', () => {
        seekBar.max = Math.floor(audio.duration);
        durationTimeEl.innerText = formatTime(audio.duration);
    });

    audio.addEventListener('timeupdate', () => {
        seekBar.value = Math.floor(audio.currentTime);
        currentTimeEl.innerText = formatTime(audio.currentTime);
    });

    seekBar.addEventListener('input', () => {
        audio.currentTime = seekBar.value;
    });

    function formatTime(seconds) {
        if (isNaN(seconds)) return "0:00";
        const min = Math.floor(seconds / 60);
        const sec = Math.floor(seconds % 60);
        return `${min}:${sec < 10 ? '0' : ''}${sec}`;
    }

    if ('mediaSession' in navigator) {
        navigator.mediaSession.setActionHandler('play', () => { audio.play(); isPlaying = true; document.getElementById('playBtn').innerText = 'II'; });
        navigator.mediaSession.setActionHandler('pause', () => { audio.pause(); isPlaying = false; document.getElementById('playBtn').innerText = '▶'; });
    }
</script>
</body>
</html>
